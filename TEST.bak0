% !TeX program = lualatex
% !TeX encoding = utf8
% !TeX spellcheck = uk_UA

\documentclass[
%border=1cm
]{ProblemBook}

\pagestyle{main}
%\usetikzlibrary{3d}


%\usepackage{OpticsImages}




\begin{document}


%\input{Difraction/Difraction}


Нехай на нескінченно довгу щілину шириною $ b $ падає плоска монохроматична світлова хвиля, довжиною $ \lambda $  (рис.~\ref{pic:Slot_Fraunhofer_difraction}).

%Помістимо за щілиною збиральну лінзу, а в фокальній площині лінзи --- екран. Хвильова поверхня хвилі, площина щілини і екран паралельні один одному.



Розіб'ємо відкриту частину хвильової поверхні на $  N $ вузьких зон однакової ширини. Коливання, що збуджуються кожною такою зоною, має однакову амплітуду $ \Delta \vect{E} $ і відстає по фазі від попереднього коливання на ту саму величину $ \frac{\delta}{N} $, що залежить від кута дифракції $ \phi $, який визначає напрямок на точку спостереження~$ P $.

Нехай довжина ланцюжка векторів $ \Delta \vect{E} $ дорівнює $ E_0 $.

%При $ \phi = 0 $ різниця фаз $ \delta = 0 $ і векторна діаграма має вигляд, показаний на рис. Амплітуда результуючого коливання $ E_0 $ дорівнює сумі амплітуд коливань.

Повна різниця фаз між початковим та кінцевим векторами дорівнює $ \delta = \frac{2\pi \Delta}{\lambda} $, де $ \Delta = b\sin\phi $ --- різниця ходу між крайніми променями. Векторна діаграма має вигляд, зображений на рис~\ref{pic:vector_diagram_slot}.

%=========================================================
\begin{figure}[h!]\centering
%---------------------------------------------------------
\begin{subfigure}[t]{0.45\linewidth}\centering
    \begin{tikzpicture}[
		declare function={
				b=1; % ширина щілини
                a=4; % ширина непрозорої частини
                				lambda = 0.3; % довжина хвилі
                				L=4; % Y Положення лінзи
                                f=6; % фокусна відстань лінзи
                                E=L+f; % Y положення екрану (x вісь графіка)
			},
	]
        	% ------------------- Побудова отвору шириною b ---------------------------


        	\foreach[count=\c] \i in {0}
        		{
        			\fill[black]  ({\i*a+\i*b+b/2}, -0.1) rectangle ++(a,0.2)
        			({-\i*a-\i*b-b/2}, -0.1) coordinate (L\c) rectangle ++(-a,0.2) ;
        		}


        	% ------------------ Падаючі на щілину промені -----------------------------


        	\foreach \i in {-1,-0.9,...,1}
        		{
        			\draw[ray] (\i*a, 1) -- ++(0,-0.9);
        		}

        	% --------------- Побудова заломлених лінзою променів ----------------


        	\pgfmathsetmacro\ph{-45} % Кут дифракції
        	\foreach[count=\c] \i in {0,0.3,...,1}
        	{

        	\draw[ray]  ({-b/2+\i*b}, -0.1) coordinate (Out\c)  --++({-90+\ph}:{L/cos(\ph)}) coordinate (In\c); % Падаючі на лінзу промені

        	}
    \end{tikzpicture}
\caption{}
\label{pic:Slot_Fraunhofer_difraction}
\end{subfigure}
%---------------------------------------------------------
\begin{subfigure}[t]{0.45\linewidth}\centering
\begin{tikzpicture} % separate paths
    \pgfmathsetmacro\N{10}
    \pgfmathsetmacro\m{0.8}
    \pgfmathsetmacro\n{\m*\N}
    \pgfmathsetmacro\E{3}
    \pgfmathsetmacro\k{0}
    \pgfmathsetmacro\dangle{180*\m}
    \draw[gray!50] (0,\E) circle (\E);
    \coordinate (@) at (0,0);

    \foreach[count=\j] \i in {1,...,\n}
    {

        \draw[->] (@) -- coordinate[at end] (@) ++ ({(2*\i-1)*pi/2/\N r}:{(pi*\E/\N - \k*\i)});

        \ifnum\j<3%
            \draw[dashed] (@) -- ++({(2*\i-1)*pi/2/\N r}:0.7);
            \draw (@) ++({(2*\i-1)*pi/2/\N r}:0.5)
            arc[start angle={(2*\i-1)*pi/2/\N r}, delta angle={2*pi/2/\N r}, radius=0.5]
            node[below right, font=\scriptsize] {$ \delta/N $};
        \fi
    }
    \draw[dashed] (@) -- ++(1,0);
    \draw[dashed] (@) -- ++(\dangle:1);
    \draw (@) ++(0.5,0) arc[start angle=0, delta angle=\dangle, radius=0.5] node[anchor=south west, pos=0.5] {$ \delta $};
    \draw[->, red] (0,0)  -- node[right] {$ \vect{E} $} (@) ;
    \draw[dashed] (0,\E) -- (@);
    \draw[dashed] (0,\E) -- (0,0);
    \draw (0,\E) ++(0,-0.5) arc[start angle=-90, delta angle=\dangle, radius=0.5] node[anchor=south west, pos=0.5] {$ \delta $};
\end{tikzpicture}
\caption{}
\label{pic:vector_diagram_slot}
\end{subfigure}
%---------------------------------------------------------
\end{figure}
%=========================================================



З геометричних міркувань випливає, що результуюча амплітуда

\end{document}


